<%= form_for [:admin, @product], html: { multipart: true } do |form| %>
  
  <div class="card mb-4">
    <div class="card-header fw-bold">Basic Information</div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-12 mb-3">
          <%= form.label :name_vi, t('products.name_vi'), class: 'form-label fw-bold' %>
          <%= form.text_field :name_vi, class: 'form-control' %>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6 mb-3">
          <%= form.label :brand_id, t('products.brand'), class: 'form-label fw-bold' %>
          <%= form.select :brand_id, @brands, { include_blank: true }, class: 'form-select' %>
        </div>

        <div class="col-md-6 mb-3">
          <%= form.label :category_id, t('products.category'), class: 'form-label fw-bold' %>
          <%= form.select :category_id, @categories, { include_blank: true }, class: 'form-select' %>
        </div>
      </div>

      <div class="mb-3">
        <%= form.label :description_vi, t('products.description_vi'), class: 'form-label fw-bold' %>
        <%= form.text_area :description_vi, class: 'form-control', rows: 5 %>
      </div>

      <div class="mb-3">
        <%= form.label :thumbnail, t('products.thumbnail'), class: 'form-label fw-bold' %>
        <%= form.file_field :thumbnail, class: 'form-control' %>
        <% if @product.thumbnail.attached? %>
          <div class="mt-2">
            <%= image_tag @product.thumbnail.variant(:thumbnail_50), class: "img-thumbnail" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>

  <div class="card mb-4">
    <div class="card-header fw-bold d-flex justify-content-between align-items-center">
      <span>Product Variants (Size & Color)</span>
      <%= link_to_add_fields "Add Variant", form, :product_variants %>
    </div>
    <div class="card-body">
      <div id="product_variants">
        <%= form.fields_for :product_variants do |variant_form| %>
          <%= render 'product_variant_fields', f: variant_form %>
        <% end %>
      </div>
    </div>
  </div>

  <div class="card mb-4">
    <div class="card-header fw-bold d-flex justify-content-between align-items-center">
      <span>Product Gallery</span>
      <%= link_to_add_fields "Add Image", form, :product_images %>
    </div>
    <div class="card-body">
      <div class="row" id="product_images_container">
        <%= form.fields_for :product_images do |image_form| %>
          <%= render 'product_image_fields', f: image_form %>
        <% end %>
      </div>
    </div>
  </div>

  <div class="d-grid gap-2">
    <%= form.submit class: 'btn btn-primary btn-lg' %>
    <%= link_to "Cancel", admin_products_path, class: "btn btn-secondary" %>
  </div>
<% end %>
